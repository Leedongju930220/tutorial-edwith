#!/bin/bash

# 프로젝트 홈
APP_DIR=/project-home

# 최신 커밋으로 체크아웃
GIT_WORK_TREE=$APP_DIR git checkout -f

# 커밋 해쉬태그
REVISION=$(expr substr $(git rev-parse --verify HEAD) 1 7)

# 서버 재구동 작업
# ...

# Incoming hook 호출
curl -X POST --data-urlencode 'payload={"channel": "#mychannel", "username": "chris", "text": "Production server is restarted! revision: '"${REVISION}"'"}' https://hooks.slack.com/services/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