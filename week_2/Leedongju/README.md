# 웹의 동작 원리
![Alt text](http://tcpschool.com/lectures/img_webbasic_10.png)

### 순서
+ HTTP
+ Request 형식
+ Response 형식



## 1단계 HTTP
+ HTTP란?<br/>
 0 www에서 정보를 주고 받을때 사용하는 프로토콜이며 80번 포트를 사용<br/>
 1 TCP기반의 통신방식 (3-way handshake)<br/>
 2 비연결 지향<br/>
 3 단방향 지향<br/>
 4 평문전송<br/>
 * 평문을 전송하기에 보안에 취약하다.<br/>
### 보안방법 : <br/>
 1. 통신자체를 암호화 : SSL(Secure Socket Layer) or TLS(Transport Layer Security)라는 다른 프로토콜을 조합함으로써 HTTP의 통신 내용을 암호화할 수     있다. SSL을 조합한 HTTP를 HTTPS(HTTP Secure) or HTTP over SSL이라고 부른다.<br/>
 2. 콘텐츠를 암호화 : 말 그대로 HTTP를 사용해서 운반하는 내용인, HTTP 메시지에 포함되는 콘텐츠만 암호화하는 것이다. 암호화해서 전송하면 받은 측에서는     그 암호를 해독하여 출력하는 처리가 필요하다.<br/>
 ## HTTPS > SSL을 사용하는 HTTP라고 보면 된다.<br/>
+ HTTP 는 브라우저가 웹 서버와 통신하기 위해 사용하는 주요 프로토콜이다. 요청형식으로는 4가지가 있다.<br/>
 1 GET : 문서를 요청. 서버가 클라이언트에 상태 정보와 복제된 문서를 보냄으로써 응답을 함. (조회)<br/>
 2 HEAD : 상태 정보를 요청. GET 과 동일한 형태로 응답을 하지만, 문서를 복제하지는 않는다.<br/>
 3 POST : 데이터를 서버로 송신. 서버는 해당 데이터를 특정 아이템에 덧붙인다. (생성)<br/>
 4 PUT : 데이터를 서버로 송신. 서버가 특정 아이템을 완전히 대체한다. (수정)<br/>
 
 ## 2단계 Request 형식
![Alt text](http://cfile1.uf.tistory.com/image/22061B47538F2A002614B6)
+ 메소드 : <br/>
  사용자가 서버에 요청하느 메소드와 Http버젼을 확인할 수 있다.<br/>
+ 요청헤더 : <br/>
  서버에 전달하는 사용자의 정보를 나타내는 부분.<br/>
+ 공백부분 : <br/>
  HTTP요청 헤더 부분과 본분 부분을 구분하기 위한 공백<br/>
+ 본문 : <br/>
  메세지의 내용을 담고있는 부분..
 
## 3단계 Response 형식
![Alt text](http://cfile1.uf.tistory.com/image/273BF650591B313219DBBB)
+ 상태코드 : <br/>
  사용자의 요청에 대한 서버의 처리 결과를 나타낸다.<br/>
+ 응답코드 : <br/>
  사용자에게 전달한 데이터의 정보를 나타내는 부분.<br/>
+ 공백부분 : <br/>
  HTTP요청 헤더 부분과 본분 부분을 구분하기 위한 공백<br/>
+ 본문 : <br/>
  사용자에게 전달한 데이터의 내용을 담고있는 부분이다.
  
## 보안에 취약한 Http대신에 모든 웹사이트에서 https를 사용하지 않는 이유
+ 평문 통신에 비해서 암호화 통신은 CPU나 메모리 등 리소스가 많이 필요하다. 통신할 때마다 암호화를 하면 많은 리소스를 소비하기 때문에 서버 한 대당 처리할 수 있는 리퀘스트의 수가 줄어들게 된다. 그렇기 때문에 민감한 정보를 다룰 때만 HTTPS에 의한 암호화 통신을 사용한다.
+ 하지만 http2.0이 발전되면서 https가 http보다 빠르다고 한다.

## 웹통신의 큰 흐름

### 우리가 Chrome을 실행시켜 주소창에 특정 URL 값을 입력시키면 어떤 일이 일어나는가?

+ 1. 브라우저
url에 입력된 값을 브라우저 내부에서 결정된 규칙에 따라 그 의미를 조사한다.<br/>
조사된 의미에 따라 Request 메시지를 만든다.<br/>
만들어진 메시지를 웹 서버로 전송한다.
<br/><br/>
+ 2. 프로토콜 스택, LAN 어댑터
프로토콜 스택(운영체제에 내장된 네트워크 제어용 소프트웨어)이 브라우저로부터 메시지를 받는다.<br/>
브라우저로부터 받은 메시지를 패킷 속에 저장한다.<br/>
그리고 수신처 주소 등의 제어정보를 덧붙인다.<br/>
그런 다음, 패킷을 LAN 어댑터에 넘긴다.<br/>
어탭터가 LAN 케이블에 송출시킨다.<br/>
<br/><br/>
+ 3. 허브, 스위치, 라우터
LAN 어댑터가 송신한 패킷은 스위칭 허브를 경우하여 인터넷 접속용 라우터에 도착한다.<br/>
라우터는 패킷을 프로바이더(통신사)에게 전달한다.<br/>
인터넷으로 들어가게 된다.
<br/><br/>
+ 4. 액세스 회선, 프로바이더
패킷은 인터넷의 입구에 있는 액세스 회선(통신 회선)에 의해 POP(Point Of Presence, 통신사용 라우터)까지 운반된다.<br/>
POP를 거쳐 인터넷의 핵심부로 들어가게 된다.<br/>
수 많은 고속 라우터들 사이로 패킷이 목적지를 향해 흘러가게 된다.
<br/><br/>
+ 5. 방화벽, 캐시서버
패킷은 인터넷 핵심부를 통과하여 웹 서버측의 LAN에 도착한다.<br/>
기다리고 있던 방화벽이 도착한 패킷을 검사한다.<br/>
패킷이 웹 서버까지 가야하는지 가지 않아도 되는지를 판단하는 캐시서버가 존재한다.<br/>
굳이 서버까지 가지 않아도 되는 경우를 골라낸다. 액세스한 페이지의 데이터가 캐시서버에 있으면 웹 서버에 의뢰하지 않고 바로 그 값을 읽을 수 있다.<br/>페이지의 데이터 중에 다시 이용할 수 있는 것이 있으면 캐시 서버에 저장된다.
<br/><br/>
+ 6. 웹 서버
패킷이 물리적인 웹 서버에 도착하면 웹 서버의 프로토콜 스택은 패킷을 추출하여 메시지를 복원하고 웹 서버 애플리케이션에 넘긴다.<br/>
메시지를 받은 웹 서버 애플리케이션은 요청 메시지에 따른 데이터를 응답 메시지에 넣어 클라이언트로 회송한다.<br/>
왔던 방식대로 응답 메시지가 클라이언트에게 전달된다.
